<!DOCTYPE html>
<html>
    <head>
        <title>Start Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            table, th, td {
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <h1>Group 2</h1>
        <h2>Class B</h2>
        <br>
        <p>Members (Loaded from Rest API)</p>

        <table style="width:100%">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Student ID</th>
                    <th>color</th>
                </tr>
            </thead>
            <tbody id="tabledata">

            </tbody>

        </table>
        <button id="Reload">Reload names </button>

        <h3>Links</h3>
        <a href="whodidwhat.html">Who Did What and our Group Contract</a><br>
        <a href="jokes.html">Cool Jokes</a><br>
        <a href="https://github.com/Hamadcph/Ca1-Flow1">GitHub Repository</a><br>



        <script>

            function getMembers() {
                fetch("http://localhost:8080/CA-1/api/Member/all")
                        .then(res => res.json())
                        .then(data => {

                            let rows = data.map(function (name) {
                                let row = "<tr> <td>" + name.name + "</td> <td>" + name.StudentId +
                                        "</td> <td>" + name.color + "</td> </tr>";
                                return row;
                            })

                            let rowsAsString = rows.join("");
                            document.getElementById("tabledata").innerHTML = rowsAsString;
                        })
            }
            document.getElementById("Reload").onclick = getMembers();

        </script>


    </body>
</html>
